import{u as f,r as l,j as e,f as i,F as j,b as y,A as N}from"./index-zwJ3F9yb.js";const v=()=>{const o=f(),x=localStorage.getItem("user"),[n,p]=l.useState([]),[m,h]=l.useState("");l.useEffect(()=>{(async()=>{const a=N+`/api/getsubsbyid?user=${x}`;try{const r=await y.get(a);p(r.data.sub)}catch(r){console.error("Error fetching subscriptions:",r)}})()},[x]);const d=()=>{o("/pricing")},s=n.length>0?n[n.length-1]:null,u=(t,a)=>{const r={monthly:30,quarterly:90,halfYearly:180,annual:365}[a]||30,c=new Date(t);return c.setDate(c.getDate()+r),c},g=t=>{h(t.target.value)},b=n.filter(t=>t.plan.toLowerCase().includes(m.toLowerCase()));return e.jsxs("div",{className:"mx-5 my-6 font-poppins font-extralight",children:[e.jsx("div",{className:"max-w-sm h-auto bg-black pt-2 my-5",children:s?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-2xl mx-5",children:"Active Subscription"}),e.jsxs("p",{className:"text-normal mx-5",children:["Subscription : ",s.plan]}),e.jsxs("p",{className:"text-normal mx-5",children:["Subscription Expiry :"," ",i(u(s.date,s.duration))]}),e.jsxs("p",{className:"text-normal mx-5 mb-2",children:["No Of Courses : ",s.course]}),e.jsx("button",{className:"text-base bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] w-full py-2",onClick:d,children:"Change / Upgrade Plan"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-2xl mx-5",children:"Active Subscription"}),e.jsxs("p",{className:"text-normal mx-5",children:["Subscription : ",localStorage.getItem("type")]}),e.jsx("p",{className:"text-normal mx-5 mb-2",children:"No Of Courses : 1"}),e.jsx("button",{className:"text-base bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] w-full py-2",onClick:d,children:"Change / Upgrade Plan"})]})}),e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-3 my-2 mx-3",children:[e.jsx("p",{className:"text-lg font-normal",children:"Subscription History"}),e.jsxs("div",{className:"flex items-center gap-3 bg-white w-96 px-6 py-1.5 rounded-md mr-3",children:[e.jsx(j,{className:"text-black text-xl"}),e.jsx("input",{type:"text",placeholder:"Search By Date/ Plan Name",className:"bg-transparent w-full outline-none text-center font-extralight text-black",value:m,onChange:g})]})]}),e.jsx("hr",{className:"my-2"}),b.reverse().map((t,a)=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between mx-2 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col gap-0 .5",children:[e.jsxs("p",{className:"text-xl",children:["Subscription : ",t.plan]}),e.jsxs("p",{children:["Subscription Start Date : ",i(t.date)]}),e.jsxs("p",{children:["Subscription End Date :"," ",i(u(t.date,t.duration))]}),e.jsxs("p",{children:["No Of Courses Generated : ",t.course]})]}),e.jsx("div",{children:e.jsx("button",{className:"text-base bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] w-48 py-2 my-5 font-normal",onClick:()=>o("/invoice",{state:{subId:t._id}}),children:"View Invoice"})})]},a),e.jsx("hr",{className:"my-3"})]}))]})};export{v as default};
